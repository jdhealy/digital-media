// Generated by CoffeeScript 1.3.3
var FormController, formController;

formController = new (FormController = (function() {

  function FormController() {
    console.log('new class FormController');
    this.values = {};
  }

  FormController.prototype.blank_value = function(element) {
    console.log("show minitip", element);
    $(element).popover({
      title: 'Error:',
      content: 'You need to put something in here!',
      placement: 'top',
      trigger: 'manual'
    });
    $(element).popover('show');
    element.scrollIntoView(false);
    return window.scrollBy(0, 100);
  };

  FormController.prototype.check_form = function() {
    var input, inputs, value, _i, _len, _ref;
    inputs = $('form .thing input[type="text"]');
    _ref = $('form .thing input[type="text"]');
    for (_i = 0, _len = _ref.length; _i < _len; _i++) {
      input = _ref[_i];
      value = _.string.trim(_.string.clean(input.value));
      if (value === '') {
        this.blank_value(input);
        return false;
      } else {
        $(input).popover('destroy');
        console.log('^', input, input.name, value);
        this.values[input.name] = value;
      }
    }
    this.add_output();
    return true;
  };

  FormController.prototype.add_output = function() {
    return $(document.body).append("<pre hidden id='lorem'>\nStraight outta <strong>" + (_.string.capitalize(this.values.city)) + "</strong>, crazy <strong>" + this.values.occupation + "</strong> named <strong>" + (_.string.capitalize(this.values.name)) + "</strong>\nFrom the gang called <strong>" + (_.string.capitalize(this.values.team)) + "</strong>\nWhen I'm called off, I got a sawed off\nSqueeze the trigger, and <strong>" + this.values.noun + "</strong> are hauled off\nYou too, boy, if ya <strong>" + this.values.verb + "</strong> with me\nThe police are gonna hafta come and get me\nOff yo <strong>" + this.values.bodyPart + "</strong>, that's how I'm goin out\nFor the punk <strong>" + (owl.pluralize(this.values.occupation)) + "</strong> that's showin out\n<strong>" + (owl.pluralize(_.string.capitalize(this.values.animal))) + "</strong> start to mumble, they wanna rumble\nMix em and cook em in a pot like <strong>" + this.values.food + "</strong>\nGoin off on a <strong>" + this.values.occupation + "</strong> like that\nwith a <strong>" + this.values.weapon + "</strong> that's pointed at yo <strong>" + this.values.bodyPart + "</strong>\nSo give it up smooth\nAin't no tellin when I'm down for a jack move\nHere's a <strong>" + this.values.media + "</strong> to keep you dancin\nwith a crime record like <strong>" + (_.string.capitalize(this.values.celebrity)) + "</strong>\nThe <strong>" + this.values.tool + "</strong> is the tool\nDon't make me act a <strong>" + (this.values.occupation + "in'") + "</strong> fool\nMe you can go toe to toe, no maybe\nI'm knockin <strong>" + (owl.pluralize(this.values.animal)) + "</strong> out tha box, daily\nyo weekly, monthly and yearly\nuntil them dumb <strong>" + (owl.pluralize(this.values.occupation)) + "</strong> see clearly\nthat I'm down with the capital <strong>" + (_.string.capitalize(this.values.acronym)) + "</strong>\nBoy you can't <strong>" + this.values.verb + "</strong> with me\nSo when I'm in your neighborhood, you better duck\nCoz <strong>" + (_.string.capitalize(this.values.name)) + "</strong> is crazy as <strong>" + this.values.verb + "</strong>\nAs I leave, believe I'm stompin\nbut when I come back, boy, I'm comin straight outta <strong>" + (_.string.capitalize(this.values.city)) + "</strong>\n</pre>");
  };

  return FormController;

})());

$("form").live('submit', function(event) {
  event.preventDefault();
  event.returnValue = false;
  if (formController.check_form() === true) {
    return $('form').fadeToggle(function() {
      return $('#about-to-witness').fadeToggle(function() {
        $('#youtube').append('<iframe width="420" height="60" src="http://www.youtube.com/embed/rhOGaNmFPAU?rel=0&autoplay=1" frameborder="0" allowfullscreen></iframe>').fadeToggle();
        window.setTimeout((function() {
          return $("#about-to-witness").fadeToggle(function() {
            return $("#lorem").fadeToggle();
          });
        }), 7500);
        return true;
      });
    });
  }
});
